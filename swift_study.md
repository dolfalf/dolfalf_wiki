# swift_study.md  

## 함수형 프로그래밍이란  
함수안에 숨겨진 입력이나 숨겨진출력을 제거하는것.  
상태나 가변 데이터를 멀리하는 프로그래밍. (함수내에서 상태가 변한다면 함수이름만을 가지고 하는일을 추론할 수 없기때문에...)  


되게 마음 불편한 코드(변수 돌려쓰기)  

```
var a = 1
a = a + 1
//... 처리처리 ... 
a = 20	//선언하기 귀찮다능! 다시 사용해야지.
//... 또 처리처리 ... 

```

---

## 불편한점  
파라메타가 많아지므로 함수가 지저분하고 복잡해 보임.
함수를 파라메터로받아 함수를 반환하고... 그안에 또 함수가 있고...


---
## 좋은점  
사실은 안복잡함.익숙하지 않아 복잡해 보이는거임. 
처리를 숨긴다고(캡슐화)한다고 간단해지는게 아님.
솔직하게 드러내면 함수내부까지 안까봐도 궁예궁예가 가능함.
게다가 변수 재할당이 안하니까 모르는사이에 상태가 변하거나 안하니 안심.
그러나.. 보통 함수형 프로그래밍 언어에서는 재할당을 문법적으로 금지한다는데 
스위프트는 inout(?) 키워드로 재할당이 가능하다능..

참조투명성 관점에서 보면 변수를 재할당하지 않는것이 좋다. (함수형 프로그래밍이니까...)
let 를 적절히 활용할것. Objetive-C 에서는 const를 사용하면 되겠죠

---

## 함수형 프로그래밍 디자인 조건  
각각의 프로그램을 반복하여 작은 단위로 쪼개야 합니다. 모든 기능 조각을 조립하여 완성된 프로그램을 정의할 수 있습니다. 거대한 프로그램을 작은 조각으로 분해할 때 각각의 조각들이 상태를 공유하는 것을 피해야 합니다. -> 모듈화  
가변 상태를 피하도록 값을 통해 프로그래밍합니다. 부작용이 발생하지 않도록 데이터의 의존성이 생기지 않도록 해야 합니다. -> 상태오염
타입의 사용을 신중하게 해야 합니다. 데이터 타입의 신중한 선택은 코드를 견고하게 작성하도록 도와주어 안전하고 강력하게 만듭니다. ->데이타타입

---

## 순수함수 만들기
count, length 함수는 임의의 문자열이나 배열에 대해서 항상 같은 길이를 반환하며, 그 외의 일은 일어나지 않습니다.

코드로 나타내보면 다음과 같이 작성할 수 있습니다.

```

func plusNumber(num: Int) -> (Int -> Int) {
  return { x in
    return x + num
  }
}

let addFive = plusNumber(5)
addFive(1)	// 5
addFive(10)	// 15
```

---

## 커링(currying) 함수가 왜 필요한가?

명령형 언어에서 함수는 보통 0개에서 n개의 인자를 동시에 받아 특정 알고리즘을 수행한다.

```
int currentYear()
int nextYear(int currentYear)
int nextYearMonthDay(int currentYear, int currentMonth, int currentDay)
```

함수형 언어에서 함수는 보통 커링함수를 사용하는데 커링 함수는 n개의 인자를 받는 함수가
있을 경우 n개의 인자를 동시에 받는 것이 아니라 1개씩 인자를 받으며 다음 인자를 받는 함수를
반환하는 함수를 말한다.
int add( int a, int b ) 라는 함수가 있을 경우, 이를 커링함수로 구현하면 아래와 같다.

```
add (int a) -> (int -> int) {
     return { b in
          return a + b
     }
}
```

add(3) 을 호출하면 결과로 { return 3 + b } 의 람다 함수가 반환된다.
따라서 아래와 같이 호출할 수 있다.

```
add(3)(4) == 7
```

문제는 커링함수가 왜 필요한가? 이다.
그것은 함수형 언어에서 데이터를 시퀀스(Sequence)라는 고차원의 리스트로 추상화해서 생각하는데
이 데이터 리스트에 어떤 연산을 가할 때 커링함수가 필요하기 때문이다.
예를 들어

```
map (add 1) [1,2,3,4,5]
```

하면 뒤에 나오는 데이터 리스트 각 항목에 1이 더해지는 것이다.

```
[2,3,4,5,6]
```

즉, 모든 함수를 커링하여 설계를 하면 데이터 리스트를 transforming 하는 연산자로 사용할 수 있기 때문에 커링함수가 함수형 프로그래밍에서 매우 중요해 지는 것이다.

--- 

## 용어정리  
함수형 프로그래밍에 대해 알아보다 몰라서 찾아본 용어들 정리.

### 일급 함수(First-class function)  
함수를 객체로 다루면서 인자로 함수를 넘기고 변수에 함수를 저장하며, 값으로 함수를 반환하는 함수.

### 순수함수(pure function)  
함수는 주어진 입력으로 계산하는 것 이외에 프로그램의 실행에 영향을 미치지 않으며, 부작용(side effect)이 없는 함수.

### 부작용(side-effect), 부원인(side-cause)  

---
